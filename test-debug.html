<!DOCTYPE html>
<html>
<head>
    <title>Stripe Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 10px 20px; margin: 10px; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Stripe Debug Test</h1>
    
    <button onclick="testEnvironment()">Test Environment Variables</button>
    <button onclick="testFullDiagnostic()">Full Diagnostic Test</button>
    <button onclick="testNormalCheckout()">Test Normal Checkout</button>
    
    <div id="results"></div>

    <script>
        const SUPABASE_URL = 'https://xzrajxmrwumzzbnlozzr.supabase.co';
        const ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh6cmFqeG1yd3VtenpibmxvenpyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM3NTM2NDMsImV4cCI6MjA0OTMyOTY0M30.qTNhKyPPHXpxJwHwg8aZKEQVmOtgJHp3sYgRqsGPAv8';

        function showResults(data) {
            document.getElementById('results').innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
        }

        async function testEnvironment() {
            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout-session?test=1`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({email: 'test@example.com'})
                });
                const data = await response.json();
                showResults(data);
            } catch (error) {
                showResults({error: error.message});
            }
        }

        async function testFullDiagnostic() {
            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout-session?debug=1`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({email: 'test@example.com'})
                });
                const data = await response.json();
                showResults(data);
            } catch (error) {
                showResults({error: error.message});
            }
        }

        async function testNormalCheckout() {
            try {
                const response = await fetch(`${SUPABASE_URL}/functions/v1/create-checkout-session`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({email: 'test@example.com'})
                });
                const data = await response.json();
                showResults(data);
            } catch (error) {
                showResults({error: error.message});
            }
        }
    </script>
</body>
</html> 